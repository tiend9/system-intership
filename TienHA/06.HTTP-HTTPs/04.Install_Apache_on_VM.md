# INSTALL APACHE ON UBUNTU AND CENTOS

## I. TRÊN UBUNTU

### 1. BẢNG 1 — Các bước cài đặt & Quản lý Apache2 trên Ubuntu

|  **Bước** |  **Lệnh** |  **Mục đích / Giải thích** |
|-------------|-------------|-------------------------------|
|  **1. Cập nhật hệ thống** | `sudo apt update && sudo apt upgrade -y` | Cập nhật danh sách gói và cài đặt bản vá bảo mật mới nhất. |
|  **2. Cài đặt Apache2** | `sudo apt install apache2 -y` | Cài web server Apache (phiên bản 2.x). |
|  **3. Kiểm tra trạng thái dịch vụ** | `sudo systemctl status apache2` | Kiểm tra Apache đang chạy hay không (**active (running)** là OK). |
|  **Khởi động thủ công (nếu chưa chạy)** | `sudo systemctl start apache2` | Bật dịch vụ Apache. |
|  **4. Cho phép khởi động cùng hệ thống** | `sudo systemctl enable apache2` | Cho phép Apache tự khởi động khi bật máy. |
|  **5. Mở port trên firewall (UFW)** | `sudo ufw allow 'Apache Full'` \|\| `sudo ufw reload` | Mở cổng **80 (HTTP)** và **443 (HTTPS)**. |
|  **6. Kiểm tra web server** | Truy cập `http://localhost/` hoặc `http://<IP_ubuntu>/` | Nếu thấy trang “Apache2 Ubuntu Default Page” → thành công |
|  **7. Các file & thư mục quan trọng** |  |  |
| ├─ **Web root** | `/var/www/html/` | Chứa file web (index.html, site...). |
| ├─ **File cấu hình chính** | `/etc/apache2/apache2.conf` | Cấu hình toàn hệ thống Apache. |
| ├─ **Virtual Host mặc định** | `/etc/apache2/sites-available/000-default.conf` | Chỉnh port, document root, log... |
| ├─ **Log truy cập** | `/var/log/apache2/access.log` | Nhật ký truy cập. |
| └─ **Log lỗi** | `/var/log/apache2/error.log` | Nhật ký lỗi hệ thống. |
|  **8. Nạp lại cấu hình** | `sudo systemctl reload apache2` | Nạp lại cấu hình mà không dừng dịch vụ. |
|  **9. Khởi động lại dịch vụ** | `sudo systemctl restart apache2` | Restart hoàn toàn Apache. |
|  **10. Kiểm tra phiên bản** | `apache2 -v` | Xem phiên bản hiện tại *(VD: Apache/2.4.57 (Ubuntu))*. |

### 2. BẢNG 2 —Các bước gỡ bỏ & Reset Apache2 về mặc định

|  **Tác vụ** |  **Lệnh** |  **Giải thích** |
|----------------|-------------|-------------------|
|  **Gỡ cài đặt Apache2** | `sudo apt remove apache2 -y` | Gỡ phần mềm Apache2 nhưng **giữ lại file cấu hình**. |
|  **Gỡ hoàn toàn (kèm cấu hình)** | `sudo apt purge apache2 -y` | Xóa sạch Apache2 và toàn bộ file cấu hình. |
|  **Dọn dẹp gói không cần thiết** | `sudo apt autoremove -y` | Loại bỏ các gói phụ thuộc còn sót lại. |
|  **Xóa thư mục cấu hình còn lại** | `sudo rm -rf /etc/apache2` | Dọn sạch thư mục cấu hình thủ công. |
|  **Cài đặt lại mới hoàn toàn** | `sudo apt install apache2 -y` | Cài lại Apache từ đầu (fresh setup). |
|  **Kiểm tra sau khi cài lại** | `sudo systemctl status apache2` | Đảm bảo dịch vụ chạy bình thường. |

### 3. Mẹo

**Mẹo:** Sau khi thay đổi cấu hình, có thể dùng  
> `sudo systemctl reload apache2` để **nạp lại cấu hình mà không ngắt dịch vụ**,  
> hoặc `sudo systemctl restart apache2` để **khởi động lại hoàn toàn**.

