# T√åM HI·ªÇU V·ªÄ VIRTUAL HOST

ƒê·ªëi v·ªõi qu·∫£n tr·ªã vi√™n h·ªá th·ªëng, nh√† ph√°t tri·ªÉn web hay ch·ªß website, vi·ªác v·∫≠n h√†nh nhi·ªÅu website tr√™n m·ªôt m√°y ch·ªß duy nh·∫•t th∆∞·ªùng ƒë·∫∑t ra b√†i to√°n v·ªÅ chi ph√≠ v√† qu·∫£n l√Ω. ƒê·ªÉ gi·∫£i b√†i to√°n n√†y th√¨ ch√∫ng ta c·∫ßn √°p d·ª•ng **VirtualHost** ƒë·ªÉ gi·∫£i quy·∫øt.

## I. VIRTUAL HOST L√Ä G√å?

![WebServer](./Apache_images/WebServer_17.png)

### 1. Kh√°i ni·ªám

Virtual Host (M√°y ch·ªß ·∫£o) l√† m·ªôt c·∫•u h√¨nh trong web server (Apache or Ngnix) cho ph√©p m·ªôt m√°y ch·ªß v·∫≠t l√Ω ho·∫∑c m√°y ch·ªß ·∫£o (VPS) duy nh·∫•t c√≥ th·ªÉ ph·ª•c v·ª• nhi·ªÅu website ho·∫∑c t√™n mi·ªÅn kh√°c nhau, c√≥ nghƒ©a l√† b·∫°n kh√¥ng c·∫ßn m·ªôt server ri√™ng(c√°c thi·∫øt b·ªã v·∫≠t l√≠) cho m·ªói website.

### 2. Ph√¢n lo·∫°i

![WebServer](./Apache_images/WebServer_18.png)

C√≥ 3 lo·∫°i Virtual host ch√≠nh:

- **Name-based Virtual Host**: D·ª±a tr√™n t√™n mi·ªÅn (domain) ƒë·ªÉ ph√¢n bi·ªát c√°c website.

V√≠ d·ª•: `site1.com`, `site2.com` ch·∫°y tr√™n c√πng m·ªôt server v·ªõi m·ªôt ƒë·ªãa ch·ªâ IP duy nh·∫•t.

- **IP-based Virtual Host**: M·ªói website c√≥ m·ªôt ƒë·ªãa ch·ªâ IP ri√™ng bi·ªát. (√çt ph·ªï bi·∫øn h∆°n)

- **Port-based Virtual Host**: qu·∫£n l√Ω nhi·ªÅu website d·ª±a theo s·ªë Port ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a c√πng v·ªõi IP or Domain. B√™n c·∫°nh ƒë√≥ Port s·ª≠ d·ª•ng c√≤n tr√°nh l·∫∑p l·∫°i v·ªõi Port ƒë∆∞·ª£c m·∫∑c ƒë·ªãnh c·ªßa ·ª©ng d·ª•ng kh√°c khi ƒëang ho·∫°t ƒë·ªông.

### 3. Ch·ª©c nƒÉng c·ªßa VirtualHost

- **Ph√¢n bi·ªát v√† ƒë·ªãnh tuy·∫øn y√™u c·∫ßu**: D·ª±a v√†o t√™n mi·ªÅn, ƒë·ªãa ch·ªâ IP ho·∫∑c c·ªïng trong y√™u c·∫ßu truy c·∫≠p t·ª´ ng∆∞·ªùi d√πng (client), web server s·∫Ω x√°c ƒë·ªãnh Virtual Host n√†o ch·ªãu tr√°ch nhi·ªám x·ª≠ l√Ω v√† tr·∫£ v·ªÅ n·ªôi dung website t∆∞∆°ng ·ª©ng.

- **Qu·∫£n l√Ω t√†i nguy√™n**: Cho ph√©p chia s·∫ª t√†i nguy√™n c·ªßa server (CPU, RAM, bƒÉng th√¥ng) m·ªôt c√°ch hi·ªáu qu·∫£ cho nhi·ªÅu website.

- **Ph·ª•c v·ª• n·ªôi dung ƒë·ªôc l·∫≠p**: M·ªói Virtual Host c√≥ th·ªÉ c√≥ th∆∞ m·ª•c ch·ª©a m√£ ngu·ªìn (document root), file log v√† c√°c thi·∫øt l·∫≠p c·∫•u h√¨nh ri√™ng bi·ªát.

### 4. C∆° ch·∫ø ho·∫°t ƒë·ªông c·ªßa VirtualHosts

![WebServer](./Apache_images/WebServer_19.png)

- Khi ng∆∞·ªùi d√πng g√µ m·ªôt t√™n mi·ªÅn v√†o tr√¨nh duy·ªát, HTTP Request ƒë∆∞·ª£c g·ª≠i ƒë·∫øn m√°y ch·ªß Web (Apache or Ngnix)

- Web Sever (v√≠ d·ª• Apache ho·∫∑c Nginx) s·∫Ω ƒë·ªçc th√¥ng tin trong Host header c·ªßa y√™u c·∫ßu HTTP ƒë·ªÉ x√°c ƒë·ªãnh t√™n mi·ªÅn m√† ng∆∞·ªùi d√πng mu·ªën truy c·∫≠p.

- D·ª±a v√†o t√™n mi·ªÅn n√†y v√† c√°c c·∫•u h√¨nh Virtual Host ƒë√£ ƒë∆∞·ª£c thi·∫øt l·∫≠p, Web Server s·∫Ω chuy·ªÉn y√™u c·∫ßu ƒë·∫øn ƒë√∫ng th∆∞ m·ª•c ch·ª©a m√£ ngu·ªìn c·ªßa website t∆∞∆°ng ·ª©ng

C·∫•u h√¨nh DNS ƒë√≥ng vai tr√≤ tr·ªè t√™n mi·ªÅn v·ªÅ ƒë·ªãa ch·ªâ IP c·ªßa m√°y ch·ªß.

### 5. Nh·ªØng l·ª£i √≠ch c·ªßa Virtual Hosts

- Ti·∫øt ki·ªám chi ph√≠ v√† t√†i nguy√™n: L√† l·ª£i √≠ch r√µ r√†ng nh·∫•t, thay v√¨ ph·∫£i ƒë·∫ßu t∆∞ nhi·ªÅu m√°y ch·ªß ri√™ng cho m·ªói website, b·∫°n c√≥ th·ªÉ ch·∫°y h√†ng ch·ª•c, th·∫≠m ch√≠ h√†ng trƒÉm website tr√™n m·ªôt VPS ho·∫∑c Server duy nh·∫•t, gi√∫p chia s·∫ª hi·ªáu qu·∫£ t√†i nguy√™n ph·∫ßn c·ª©ng, gi·∫£m ƒë√°ng k·ªÉ chi ph√≠ ƒë·∫ßu t∆∞ v√† v·∫≠n h√†nh.

- Qu·∫£n l√Ω t·∫≠p trung hi·ªáu qu·∫£: Vi·ªác qu·∫£n l√Ω nhi·ªÅu website (c·∫•u h√¨nh, file log, m√£ ngu·ªìn) tr·ªü n√™n d·ªÖ d√†ng h∆°n khi t·∫•t c·∫£ ƒë·ªÅu n·∫±m tr√™n m·ªôt m√°y ch·ªß. C√°c ch·ªâ th·ªã c·∫•u h√¨nh nh∆∞ `ServerName` v√† `DocumentRoot` trong file c·∫•u h√¨nh Virtual Host gi√∫p b·∫°n t·ªï ch·ª©c v√† ki·ªÉm so√°t t·ª´ng website m·ªôt c√°ch r√µ r√†ng.

- Linh ho·∫°t cho ph√°t tri·ªÉn v√† th·ª≠ nghi·ªám: Virtual Hosts cho ph√©p b·∫°n d·ªÖ d√†ng t·∫°o ra c√°c m√¥i tr∆∞·ªùng ph√°t tri·ªÉn, th·ª≠ nghi·ªám song song v·ªõi website ch√≠nh tr√™n c√πng m·ªôt m√°y ch·ªß, gi√∫p vi·ªác ki·ªÉm th·ª≠ c√°c t√≠nh nƒÉng m·ªõi ho·∫∑c c·∫≠p nh·∫≠t kh√¥ng b·ªã ·∫£nh h∆∞·ªüng ƒë·∫øn website ƒëang ho·∫°t ƒë·ªông.

- Ph√¢n t√°ch m√¥i tr∆∞·ªùng: M·∫∑c d√π ch·∫°y tr√™n c√πng server, m·ªói Virtual Host c√≥ `DocumentRoot` v√† c·∫•u h√¨nh ri√™ng, gi√∫p t·∫°o ra s·ª± t√°ch bi·ªát nh·∫•t ƒë·ªãnh gi·ªØa c√°c website, gi·∫£m thi·ªÉu r·ªßi ro b·∫£o m·∫≠t l√¢y lan v√† xung ƒë·ªôt c·∫•u h√¨nh gi·ªØa c√°c trang.

- T·∫°o ra m√¥i tr∆∞·ªùng qu·∫£n l√≠ ri√™ng : Trong 1 t·ªï ch·ª©c h·ªç c√≥ th·ªÉ s·ª≠ d·ª•ng nhi·ªÅu t√™n mi·ªÅn ƒë·ªÉ qu·∫£n l√≠ c√°c ph√≤ng ban kh√°c nhau.

### 6. Ph√¢n bi·ªát Server, Host, Virtual Host v√† VPS

| **Kh√°i ni·ªám** | **ƒê·ªãnh nghƒ©a** | **ƒê·∫∑c ƒëi·ªÉm ch√≠nh** | **M·ªëi quan h·ªá** |
|----------------|----------------|--------------------|-----------------|
| **Server (M√°y ch·ªß)** | M·ªôt m√°y t√≠nh (v·∫≠t l√Ω ho·∫∑c ·∫£o) m·∫°nh m·∫Ω, ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ l∆∞u tr·ªØ, x·ª≠ l√Ω v√† cung c·∫•p d·ªØ li·ªáu ho·∫∑c d·ªãch v·ª• cho c√°c m√°y t√≠nh kh√°c (clients) qua m·∫°ng. | Cung c·∫•p t√†i nguy√™n v√† d·ªãch v·ª•. | L√† n·ªÅn t·∫£ng v·∫≠t l√Ω ho·∫∑c h·∫° t·∫ßng c∆° b·∫£n. |
| **Host (trong hosting)** | Th∆∞·ªùng d√πng ƒë·ªÉ ch·ªâ h√†nh ƒë·ªông ho·∫∑c d·ªãch v·ª• cung c·∫•p kh√¥ng gian l∆∞u tr·ªØ v√† t√†i nguy√™n c·∫ßn thi·∫øt ƒë·ªÉ m·ªôt website c√≥ th·ªÉ ho·∫°t ƒë·ªông tr√™n Internet. | C√≥ th·ªÉ l√† *shared hosting*, *VPS hosting*, *dedicated server hosting*. | L√† d·ªãch v·ª• ƒë∆∞·ª£c cung c·∫•p tr√™n m·ªôt Server. |
| **VPS (M√°y ch·ªß ri√™ng ·∫£o)** | M·ªôt m√¥i tr∆∞·ªùng m√°y ch·ªß ·∫£o ƒë∆∞·ª£c t·∫°o ra b·∫±ng c√°ch ph√¢n chia m·ªôt m√°y ch·ªß v·∫≠t l√Ω th√†nh nhi·ªÅu m√°y ch·ªß ·∫£o ƒë·ªôc l·∫≠p. | C√≥ t√†i nguy√™n ri√™ng bi·ªát, h·ªá ƒëi·ªÅu h√†nh ri√™ng v√† quy·ªÅn qu·∫£n tr·ªã cao nh·∫•t (*root/administrator*). | M·ªôt Server v·∫≠t l√Ω c√≥ th·ªÉ ch·ª©a nhi·ªÅu VPS. VPS l√† m·ªôt l·ª±a ch·ªçn ph·ªï bi·∫øn ƒë·ªÉ ng∆∞·ªùi d√πng c√≥ to√†n quy·ªÅn c·∫•u h√¨nh Virtual Hosts. |
| **Virtual Host** | M·ªôt c·∫•u h√¨nh ph·∫ßn m·ªÅm tr√™n web server cho ph√©p m·ªôt Server ho·∫∑c m·ªôt VPS ph·ª•c v·ª• nhi·ªÅu website/t√™n mi·ªÅn kh√°c nhau. | Kh√¥ng ph·∫£i l√† m·ªôt m√°y ch·ªß v·∫≠t l√Ω hay VPS ri√™ng bi·ªát. L√† m·ªôt thi·∫øt l·∫≠p logic tr√™n web server. | ƒê∆∞·ª£c c·∫•u h√¨nh b√™n trong m·ªôt web server ch·∫°y tr√™n m·ªôt Server v·∫≠t l√Ω ho·∫∑c m·ªôt VPS. M·ªói VPS/Server c√≥ th·ªÉ c·∫•u h√¨nh nhi·ªÅu Virtual Hosts. |

## II. C·∫§U H√åNH VIRTUAL HOST TRONG APACHE(C·∫§U H√åNH NHI·ªÄU WEBSITE TR√äN 1 WEBSEVER)

### Y√™u c·∫ßu b√†i to√°n

- T·∫°o 2 WebSite v·ªõi 2 Domain kh√°c nhau ƒë√≥ l√† `mywebsite1.com` v√† `mywebsite2.com` tr√™n c√πng 1 Websever Apache tr√™n m√°y c·ªßa b·∫°n v√† c√πng chung 1 ƒë·ªãa ch·ªâ IP

- Th·ª±c h√†nh tr√™n c·∫£ Ubuntu v√† CentOS9

### 1. Tr√™n Ubuntu

#### B∆∞·ªõc 1: T·∫°o c·∫•u tr√∫c th∆∞ m·ª•c

C·∫•u tr√∫c th∆∞ m·ª•c s·∫Ω l∆∞u tr·ªØ d·ªØ li·ªáu c·ªßa ng∆∞·ªùi d√πng khi truy c·∫≠p v√†o website. B·∫°n c·∫ßn t·∫°o th∆∞ m·ª•c g·ªëc (`/var/www/directory`) cho m·ªói t√™n mi·ªÅn, v√≠ d·ª• `mywebsite1.com` v√† `mywebsite2.com`:

```bash
sudo mkdir -p /var/www/mywebsite1.com
sudo mkdir -p /var/www/mywebsite2.com
```

- `mkdir`: Vi·∫øt t·∫Øt c·ªßa "make directory", l·ªánh n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·∫°o th∆∞ m·ª•c.
- `-p`: T√πy ch·ªçn n√†y c√≥ nghƒ©a l√† "parents". N√≥ cho ph√©p l·ªánh t·∫°o c√°c th∆∞ m·ª•c cha n·∫øu ch√∫ng ch∆∞a t·ªìn t·∫°i. Trong tr∆∞·ªùng h·ª£p n√†y, n·∫øu `/var/www/mywebsite1.com` ch∆∞a t·ªìn t·∫°i, n√≥ s·∫Ω ƒë∆∞·ª£c t·∫°o tr∆∞·ªõc khi `index.html` ƒë∆∞·ª£c t·∫°o.

#### B∆∞·ªõc 2: C·∫•p quy·ªÅn truy c·∫≠p

M·∫∑c ƒë·ªãnh, th∆∞ m·ª•c b·∫°n v·ª´a t·∫°o thu·ªôc quy·ªÅn c·ªßa t√†i kho·∫£n root. ƒê·ªÉ c√≥ th·ªÉ s·ª≠a ƒë·ªïi c√°c file trong th∆∞ m·ª•c n√†y, b·∫°n c·∫ßn c·∫•p quy·ªÅn truy c·∫≠p cho t√†i kho·∫£n ng∆∞·ªùi d√πng b·∫±ng c√°ch sau ƒë√¢y:

```bash
sudo chown -R $tien9a:$tien9a /var/www/mywebsite1.com
sudo chown -R $tien9a:$tien9a /var/www/mywebsite2.com
sudo chmod -R 755 /var/www
```

- `chown`: Vi·∫øt t·∫Øt c·ªßa "change owner", l·ªánh n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ thay ƒë·ªïi quy·ªÅn s·ªü h·ªØu c·ªßa t·ªáp ho·∫∑c th∆∞ m·ª•c.
- `-R`: T√πy ch·ªçn n√†y c√≥ nghƒ©a l√† "recursive". N√≥ cho ph√©p l·ªánh thay ƒë·ªïi quy·ªÅn s·ªü h·ªØu c·ªßa t·∫•t c·∫£ c√°c t·ªáp v√† th∆∞ m·ª•c con b√™n trong th∆∞ m·ª•c ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh.
- `User`: user ƒë·∫ßu l√† ƒë·∫∑t ng∆∞·ªùi d√πng s·ªü h·ªØu, user 2 l√† ƒë·∫∑t nh√≥m ng∆∞·ªùi d√πng s·ªü h·ªØu
- `chmod`: Vi·∫øt t·∫Øt c·ªßa "change mode", l·ªánh n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ thay ƒë·ªïi quy·ªÅn truy c·∫≠p c·ªßa t·ªáp ho·∫∑c th∆∞ m·ª•c.
- `755`: ƒê√¢y l√† m√£ quy·ªÅn truy c·∫≠p.V·ªõi:
  - `4`- l√† ƒë·ªçc, `2`-l√† vi·∫øt , `1` l√† th·ª±c thi

#### B∆∞·ªõc 3 : t·∫°o File `index.html`

```bash
sudo touch /var/www/mywebsite1/index.html
sudo touch /var/www/mywebsite2/index.html
```

#### B∆∞·ªõc 4: T·∫°o n·ªôi dung trang cho m·ªói VirtualHost

T·∫°o m·ªôt file HTML ƒë∆°n gi·∫£n l√†m trang m·∫´u cho m·ªói t√™n mi·ªÅn. V√≠ d·ª•, cho `mywebsite1.com`, m·ªü tr√¨nh so·∫°n th·∫£o v√† t·∫°o file HTML nh∆∞ sau:

```bash
sudo nano /var/www/mywebsite1.com/index.html
sudo nano /var/www/mywebsite2.com/index.html
```

Ghi ƒë√® n·ªôi dung m√† ta mu·ªën add v√†o trang s·ª≠ d·ª•ng `html` and

- ·ªû `mywebsite1.com`:

```html
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MyWebsite1 ‚Äî Welcome</title>
  <meta name="description" content="A simple static site served by Apache on Ubuntu" />
  <link rel="icon" href="/favicon.ico" />
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1 class="brand">MyWebsite1</h1>
      <nav class="nav">
        <a href="/">Home</a>
        <a href="/about.html">About</a>
        <a href="/contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <main class="container main">
    <section class="hero">
      <h2>Welcome to My Static Site</h2>
      <p class="lead">This site is served by Apache on Ubuntu with a VirtualHost configured.</p>
      <a class="btn" href="/about.html">Learn more</a>
    </section>

    <section class="cards">
      <article class="card">
        <h3>Fast</h3>
        <p>Static HTML is very fast and simple to host.</p>
      </article>

      <article class="card">
        <h3>Secure</h3>
        <p>No server-side code ‚Äî lower attack surface.</p>
      </article>

      <article class="card">
        <h3>Portable</h3>
        <p>Easily move to another host or CDN.</p>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>¬© <span id="year"></span> MyWebsite1 ‚Äî Served by Apache</small>
    </div>
  </footer>

  <script>
    // small nicety: update year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
```

- ·ªû `website2.com`:

```html
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MyWebsite2 ‚Äî Welcome</title>
  <meta name="description" content="A simple static site served by Apache on Ubuntu" />
  <link rel="icon" href="/favicon.ico" />
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1 class="brand">MyWebsite2</h1>
      <nav class="nav">
        <a href="/">Home</a>
        <a href="/about.html">About</a>
        <a href="/contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <main class="container main">
    <section class="hero">
      <h2>Welcome to My Static Site</h2>
      <p class="lead">This site is served by Apache on Ubuntu with a VirtualHost configured.</p>
      <a class="btn" href="/about.html">Learn more</a>
    </section>

    <section class="cards">
      <article class="card">
        <h3>Fast</h3>
        <p>Static HTML is very fast and simple to host.</p>
      </article>

      <article class="card">
        <h3>Secure</h3>
        <p>No server-side code ‚Äî lower attack surface.</p>
      </article>

      <article class="card">
        <h3>Portable</h3>
        <p>Easily move to another host or CDN.</p>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>¬© <span id="year"></span> MyWebsite2 ‚Äî Served by Apache</small>
    </div>
  </footer>

  <script>
    // small nicety: update year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
```

#### B∆∞·ªõc  5: T·∫°o file CSS v√† ghi ƒë√® n·ªôi dung n√≥ v√†o nh∆∞ sau (l√†m y h·ªát nh∆∞ ta t·∫°o `file.html` d√πng `touch`v√† `chown` v·ªõi folder `css`)

```bash
sudo nano /var/www/mywebsite1/css/style.css
sudo nano /var/www/mywebsite2/css/style.css
```

- ·ªû trang web1:

```css
:root{
  --bg:#f7f8fb;
  --card:#ffffff;
  --accent:#2563eb;
  --text:#0f172a;
  --muted:#64748b;
  --radius:12px;
  --container:1100px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
}
.container{
  max-width:var(--container);
  margin:0 auto;
  padding:1rem;
}
.site-header{
  background:white;
  border-bottom:1px solid #e6eef8;
}
.site-header .container{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1rem;
}
.brand{margin:0;font-size:1.25rem;color:var(--accent)}
.nav a{
  margin-left:1rem;
  text-decoration:none;
  color:var(--muted);
  font-weight:600;
}
.nav a:hover{color:var(--accent)}
.main{padding:2rem 1rem}
.hero{
  background:linear-gradient(90deg, rgba(37,99,235,0.08), rgba(37,99,235,0.02));
  padding:2rem;
  border-radius:var(--radius);
  margin-bottom:1.25rem;
}
.hero h2{margin:0 0 .5rem;font-size:1.6rem}
.lead{color:var(--muted);margin:0 0 1rem}
.btn{
  display:inline-block;
  background:var(--accent);
  color:white;
  padding:.5rem .9rem;
  border-radius:8px;
  text-decoration:none;
  font-weight:600;
}
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:1rem;
}
.card{
  background:var(--card);
  padding:1rem;
  border-radius:10px;
  box-shadow:0 6px 18px rgba(16,24,40,0.04);
}
.card h3{margin:0 0 .5rem}
.site-footer{
  margin-top:2rem;
  padding:1rem 0;
  text-align:center;
  color:var(--muted);
  font-size:.9rem;
}
@media (max-width:640px){
  .site-header .container{flex-direction:column;align-items:flex-start}
  .nav a{margin-left:0;margin-right:1rem}
}
```

- ·ªû trang web2:

```css
:root{
  --bg:#f7f8fb;
  --card:#ffffff;
  --accent:#2563eb;
  --text:#0f172a;
  --muted:#64748b;
  --radius:12px;
  --container:1100px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
}
.container{
  max-width:var(--container);
  margin:0 auto;
  padding:1rem;
}
.site-header{
  background:white;
  border-bottom:1px solid #e6eef8;
}
.site-header .container{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1rem;
}
.brand{margin:0;font-size:1.25rem;color:var(--accent)}
.nav a{
  margin-left:1rem;
  text-decoration:none;
  color:var(--muted);
  font-weight:600;
}
.nav a:hover{color:var(--accent)}
.main{padding:2rem 1rem}
.hero{
  background:linear-gradient(90deg, rgba(37,99,235,0.08), rgba(37,99,235,0.02));
  padding:2rem;
  border-radius:var(--radius);
  margin-bottom:1.25rem;
}
.hero h2{margin:0 0 .5rem;font-size:1.6rem}
.lead{color:var(--muted);margin:0 0 1rem}
.btn{
  display:inline-block;
  background:var(--accent);
  color:white;
  padding:.5rem .9rem;
  border-radius:8px;
  text-decoration:none;
  font-weight:600;
}
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:1rem;
}
.card{
  background:var(--card);
  padding:1rem;
  border-radius:10px;
  box-shadow:0 6px 18px rgba(16,24,40,0.04);
}
.card h3{margin:0 0 .5rem}
.site-footer{
  margin-top:2rem;
  padding:1rem 0;
  text-align:center;
  color:var(--muted);
  font-size:.9rem;
}
@media (max-width:640px){
  .site-header .container{flex-direction:column;align-items:flex-start}
  .nav a{margin-left:0;margin-right:1rem}
}
```

#### B∆∞·ªõc 6: T·∫°o file c·∫•u h√¨nh cho VirtualHosts

Apache m·∫∑c ƒë·ªãnh c√≥ site `/etc/apache2/sites-available/000-default.conf`. Ta t·∫°o site ri√™ng ƒë·ªÉ qu·∫£n l√Ω d·ªÖ h∆°n:

```bash
sudo nano /etc/apache2/sites-available/mywebsite1.conf
sudo nano /etc/apache2/sites-available/mywebsite2.conf
```

**Th√™m n·ªôi dung**:

- ·ªû `mywebsite1.com`:

```apache
<VirtualHost *:80>
    ServerAdmin admin@mywebsite1.com
    ServerName mywebsite1.com
    ServerAlias www.mywebsite1.com
    DocumentRoot /var/www/mywebsite1.com

    <Directory /var/www/mywebsite1.com>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/mywebsite1_error.log
    CustomLog ${APACHE_LOG_DIR}/mywebsite1_access.log combined
</VirtualHost>
```

- ·ªû `mywebsite2.com`:

```apache
<VirtualHost *:801>
    ServerAdmin admin@mywebsite2.com
    ServerName mywebsite2.com
    ServerAlias www.mywebsite2.com
    DocumentRoot /var/www/mywebsite2.com

    <Directory /var/www/mywebsite2.com>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/mywebsite2_error.log
    CustomLog ${APACHE_LOG_DIR}/mywebsite2_access.log combined
</VirtualHost>
```

**V·ªõi**:

- `<VirtualHost *:80>`: ƒê√¢y l√† th·∫ª c·∫•u h√¨nh VirtualHost. `*` ƒë·∫°i di·ªán cho t·∫•t c·∫£ c√°c ƒë·ªãa ch·ªâ IP tr√™n m√°y ch·ªß. `80` ch·ªâ ƒë·ªãnh c·ªïng VirtualHost n√†y l·∫Øng nghe.
- `ServerAdmin`:  t√™n mi·ªÅn ch√≠nh c·ªßa VirtualHost. Khi m·ªôt y√™u c·∫ßu HTTP ƒë·∫øn m√°y ch·ªß v·ªõi ti√™u ƒë·ªÅ Host l√† mywebsite1.com, Apache s·∫Ω s·ª≠ d·ª•ng c·∫•u h√¨nh VirtualHost n√†y ƒë·ªÉ x·ª≠ l√Ω y√™u c·∫ßu.
- `ServerAlias`: Ch·ªâ ƒë·ªãnh c√°c t√™n mi·ªÅn ph·ª• (alias) kh√°c m√† VirtualHost n√†y c≈©ng s·∫Ω x·ª≠ l√Ω. Trong tr∆∞·ªùng h·ª£p n√†y, n·∫øu m·ªôt y√™u c·∫ßu HTTP ƒë·∫øn m√°y ch·ªß v·ªõi ti√™u ƒë·ªÅ Host l√† `www.mywebsite1.com`, Apache c≈©ng s·∫Ω s·ª≠ d·ª•ng c·∫•u h√¨nh VirtualHost n√†y. ƒêi·ªÅu n√†y cho ph√©p ng∆∞·ªùi d√πng truy c·∫≠p trang web b·∫±ng c·∫£ `mywebsite1.com` v√† `www.mywebsite1.com`.
- `DocumentRoot`: Ch·ªâ ƒë·ªãnh th∆∞ m·ª•c g·ªëc ch·ª©a c√°c t·ªáp trang web c·ªßa VirtualHost. Khi m·ªôt y√™u c·∫ßu HTTP ƒë·∫øn, Apache s·∫Ω t√¨m ki·∫øm c√°c t·ªáp trong th∆∞ m·ª•c n√†y ƒë·ªÉ ph·ª•c v·ª• cho ng∆∞·ªùi d√πng.
- `ErrorLog ${APACHE_LOG_DIR}/ubuntu1.com_error.log` h·ªâ ƒë·ªãnh ƒë∆∞·ªùng d·∫´n ƒë·∫øn t·ªáp nh·∫≠t k√Ω l·ªói c·ªßa VirtualHost. T·∫•t c·∫£ c√°c l·ªói g·∫∑p ph·∫£i khi x·ª≠ l√Ω c√°c y√™u c·∫ßu cho VirtualHost n√†y s·∫Ω ƒë∆∞·ª£c ghi v√†o t·ªáp n√†y. `${APACHE_LOG_DIR}` l√† m·ªôt bi·∫øn m√¥i tr∆∞·ªùng c·ªßa Apache, th∆∞·ªùng tr·ªè ƒë·∫øn th∆∞ m·ª•c `/var/log/apache2/`.
- `CustomLog ${APACHE_LOG_DIR}/ubuntu1.com_access.log combined`: Ch·ªâ ƒë·ªãnh ƒë∆∞·ªùng d·∫´n ƒë·∫øn t·ªáp nh·∫≠t k√Ω truy c·∫≠p c·ªßa VirtualHost. T·∫•t c·∫£ c√°c y√™u c·∫ßu HTTP ƒë·∫øn VirtualHost n√†y s·∫Ω ƒë∆∞·ª£c ghi v√†o t·ªáp n√†y. combined l√† ƒë·ªãnh d·∫°ng nh·∫≠t k√Ω, cung c·∫•p th√¥ng tin chi ti·∫øt v·ªÅ c√°c y√™u c·∫ßu.

#### B∆∞·ªõc 7: K√≠ch ho·∫°t VirtualHost

Ch·∫°y l·ªánh c·∫•u h√¨nh :

```bash
sudo a2ensite mywebsite1.conf
sudo a2ensite mywebsite2.conf
```

- `a2ensite`: vi·∫øt t·∫Øt c·ªßa "Apache 2 enable site".
  - t·∫°o c√°c li√™n k·∫øt t∆∞·ª£ng tr∆∞ng (symbolic links) t·ª´ c√°c t·ªáp c·∫•u h√¨nh Virtual Host trong th∆∞ m·ª•c `/etc/apache2/sites-available/` ƒë·∫øn th∆∞ m·ª•c `/etc/apache2/sites-enabled/`.
  - Apache ch·ªâ ƒë·ªçc c√°c t·ªáp c·∫•u h√¨nh trong th∆∞ m·ª•c `sites-enabled/`, do ƒë√≥, vi·ªác t·∫°o li√™n k·∫øt t∆∞·ª£ng tr∆∞ng n√†y k√≠ch ho·∫°t c·∫•u h√¨nh Virtual Host.

T·∫Øt site m·∫∑c ƒë·ªãnh (N·∫øu c·∫ßn):

```bash
sudo a2dissite 000-default.conf
```

Ki·ªÉm tra l·ªói c√∫ ph√°p:

```bash
sudo apachectl configtest
```

- Tr·∫£ v·ªÅ `Syntax OK` -> Th√†nh c√¥ng

![WebServer](./Apache_images/WebServer_20.png)

Kh·ªüi ƒë·ªông l·∫°i Apache:

```bash
sudo systemctl restart apache2
```

#### B∆∞·ªõc 8: C·∫•u h√¨nh file hosts (Tr√™n m√°y c·ª•c b·ªô v√¨ truy c·∫≠p website t·∫°i ƒë√≥ ho·∫∑c tr√™n con VM)

**Tr√™n m√°y c·ª•c b·ªô (Windows):**

M·ªü file `C:\Windows\System32\drivers\etc\hosts` tr√™n Notepad v·ªõi quy·ªÅn `Admin`.

Th√™m v√†o cu·ªëi file:

```ruby
192.168.60.133 mywebsite1.com
192.168.60.133 mywebsite2.com
```

**Tr√™n VM (Ubuntu)**:

File n·∫±m ·ªü:

```bash
/etc/hosts
```

Ch·ªânh b·∫±ng:

```bash
sudo nano /etc/hosts
```

B∆∞·ªõc 9: Truy c·∫≠p tr√™n tr√¨nh duy·ªát

```ruby
http://mywebsite1.com
http://mywebsite2.com
```

![WebServer](./Apache_images/WebServer_21.png)

![WebServer](./Apache_images/WebServer_22.png)

### 2. Tr√™n CentOS9

#### B∆∞·ªõc 1: Active Apache

```bash
sudo dnf update -y
sudo dnf install httpd -y
sudo systemctl enable --now httpd
sudo systemctl status httpd
```

=> Th·∫•y active (running) l√† OK.

#### B∆∞·ªõc 2: T·∫°o th∆∞ m·ª•c web + ph√¢n quy·ªÅn

```bash
sudo mkdir -p /var/www/mywebsite1.com
sudo mkdir -p /var/www/mywebsite2.com
sudo chown -R $tien9a:$tien9a /var/www/mywebsite1.com
sudo chown -R $tien9a:$tien9a /var/www/mywebsite2.com
sudo chmod -R 755 /var/www
```

#### B∆∞·ªõc 3: T·∫°o n·ªôi dung trang web

- ·ªû website 1:

T·∫°o file `index.html`b·∫±ng `touch` v√† ghi ƒë√® n·ªôi dung b·∫±ng `nano`

```bash
sudo touch /var/www/mywebsite1.com/index.html
sudo nano /var/www/mywebsite
```

Ch√®n n·ªôi dung html v√†o:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MyWebsite1 - Welcome</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <h1>Welcome to MyWebsite1!</h1>
    <p>This is a sample static site hosted on Apache (CentOS 9).</p>
    <p>Site theme: <strong>Blue Ocean</strong></p>
  </div>
</body>
</html>
```

T·∫°o th∆∞ m·ª•c `css` + ph√¢n quy·ªÅn:

```bash
sudo mkdir -p /var/www/mywebsite1.com/css
sudo chown -R $tien9a:$tien9a /var/www/mywebsite1.com/css
sudo chmod -R 755 /var/www/mywebsite1.com/css
```

T·∫°o file `style.css` b·∫±ng l·ªánh `touch` v√† ghi ƒë√® b·∫±ng `nano`:

```bash
sudo touch /var/www/mywebsite1.com/css/style.css
sudo nano /var/www/mywebsite1.com/css/style.css
```

Ghi ƒë√® v√†o file `style.css`:

```css
body {
  background-color: #e6f0ff;
  font-family: Arial, sans-serif;
  color: #003366;
  text-align: center;
  margin-top: 100px;
}
.container {
  background-color: white;
  display: inline-block;
  padding: 30px 60px;
  border-radius: 15px;
  box-shadow: 0 0 10px rgba(0,0,0,0.2);
}
h1 {
  color: #0055cc;
}
```

- ·ªû Website 2 (mywebsite2.com)

T·∫°o file `index.html` c√°c b∆∞·ªõc t∆∞∆°ng t·ª± nh∆∞ ·ªü trang web1:

```bash
sudo nano /var/www/mywebsite2.com/index.html
```

Ch√®n n·ªôi dung `html` v√†o:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MyWebsite2 - Hello</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <h1>Hello from MyWebsite2!</h1>
    <p>This site is also hosted on Apache (CentOS 9).</p>
    <p>Site theme: <strong>Orange Sunset</strong></p>
  </div>
</body>
</html>
```

T·∫°o folder `css` v√† file `style.css` t∆∞∆°ng t·ª± nh∆∞ ·ªü trang web 1:

Ghi ƒë√® n·ªôi dung css b·∫±ng tr√¨nh `nano`:

```
sudo /var/www/mywebsite2.com/css/style.css
```

ƒê√® n·ªôi dung v√†o :

```css
body {
  background-color: #fff3e0;
  font-family: Verdana, sans-serif;
  color: #663300;
  text-align: center;
  margin-top: 100px;
}
.container {
  background-color: white;
  display: inline-block;
  padding: 30px 60px;
  border-radius: 15px;
  box-shadow: 0 0 10px rgba(0,0,0,0.2);
}
h1 {
  color: #ff6600;
}
```

#### B∆∞·ªõc 4: T·∫°o file c·∫•u h√¨nh VirtualHost

üîß /etc/httpd/conf.d/mywebsite1.com.conf
<VirtualHost *:80>
    ServerAdmin admin@mywebsite1.com
    ServerName mywebsite1.com
    ServerAlias www.mywebsite1.com
    DocumentRoot /var/www/mywebsite1.com

    <Directory /var/www/mywebsite1.com>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    ErrorLog /var/log/httpd/mywebsite1_error.log
    CustomLog /var/log/httpd/mywebsite1_access.log combined
</VirtualHost>

üîß /etc/httpd/conf.d/mywebsite2.com.conf
<VirtualHost *:80>
    ServerAdmin admin@mywebsite2.com
    ServerName mywebsite2.com
    ServerAlias www.mywebsite2.com
    DocumentRoot /var/www/mywebsite2.com

    <Directory /var/www/mywebsite2.com>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    ErrorLog /var/log/httpd/mywebsite2_error.log
    CustomLog /var/log/httpd/mywebsite2_access.log combined
</VirtualHost>

üß∞ B∆Ø·ªöC 5: Ki·ªÉm tra c·∫•u h√¨nh Apache
sudo apachectl configtest


‚úÖ Ph·∫£i ra: Syntax OK

üöÄ B∆Ø·ªöC 6: Kh·ªüi ƒë·ªông l·∫°i Apache
sudo systemctl restart httpd

üî• B∆Ø·ªöC 7: M·ªü port 80 tr√™n firewall
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --reload

üíª B∆Ø·ªöC 8: S·ª≠a file hosts b√™n m√°y Windows (client)

M·ªü:

C:\Windows\System32\drivers\etc\hosts


Th√™m d√≤ng (gi·∫£ s·ª≠ IP server l√† 192.168.60.133):

192.168.60.133 mywebsite1.com
192.168.60.133 mywebsite2.com


L∆∞u l·∫°i (ch·∫°y Notepad b·∫±ng quy·ªÅn Administrator).

üåà B∆Ø·ªöC 9: Truy c·∫≠p th·ª≠

Tr√™n tr√¨nh duy·ªát:

http://mywebsite1.com
http://mywebsite2.com